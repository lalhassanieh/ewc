{%- assign nav = section.settings.navigation -%}
{%- assign infinite 		= section.settings.infinite -%}
{%- assign autoplay 		= section.settings.autoplay -%}
{%- assign autoplay_speed	= section.settings.autoplay_speed | escape -%}
{%- assign columns 			= section.settings.columns -%}
{%- assign column1440 		= section.settings.column1440 -%}
{%- assign column1 			= section.settings.column1 -%}
{%- assign column2 			= section.settings.column2 -%}
{%- assign column3 			= section.settings.column3 -%}
{%- assign column4 			= section.settings.column4 -%}
{%- if recommendations.performed -%}
	{%- if recommendations.products_count > 0 -%}
	<div class="product-recommendations">
		<div class="container">
			<div class="product-recommendations__inner bwp_slick-margin-mobile">
				{%- if section.settings.heading != blank -%}
				<div class="wpbingo-title{% if settings.show_title_bg %} wpbingo-title--bg-img{% endif %}">
					<h3 class="wpbingo-title__heading">{{ section.settings.heading }}</h3>
				</div>
				{%- endif -%}
				<div class="js-product-recommendations" data-nav="{{ nav }}"
					data-infinite="{{ infinite }}"
					data-autoplay="{{ autoplay }}"
					data-autoplayspeed="{{ autoplay_speed }}"
					data-columns="{{ columns }}"
					data-column1440="{{ column1440 }}"
					data-column1="{{ column1 }}"
					data-column2="{{ column2 }}"
					data-column3="{{ column3 }}"
					data-column4="{{ column4 }}">
					{%- for product in recommendations.products -%}
					<div class="slick-carousel__item">
						{% include 'product-grid-item' %}
					</div>
					{%- endfor -%}
				</div>
			</div>
		</div>
	</div>
	{%- endif -%}
{%- else  -%}
	<div 	data-base-url="{{ routes.product_recommendations_url }}" 
			data-product-id="{{ product.id }}" 
			data-section-id="{{ section.id }}" 
			data-section-type="product-recommendations"
			data-nav="{{ nav }}"
			data-infinite="{{ infinite }}"
			data-autoplay="{{ autoplay }}"
			data-autoplayspeed="{{ autoplay_speed }}"
			data-columns="{{ columns }}"
			data-column1440="{{ column1440 }}"
			data-column1="{{ column1 }}"
			data-column2="{{ column2 }}"
			data-column3="{{ column3 }}"
			data-column4="{{ column4 }}"
			data-title="{{ section.settings.heading }}" 
			style="margin:{{ section.settings.margin }};" >
	</div>
{%- endif -%}

{% schema %}
{
  "name": "Product recommendations",
  "settings": [
    {
		"type": "text",
		"id": "margin",
		"label": "Margin",
		"default": "30px 0"
	},
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "You may also like"
    },
	{
      "type": "header",
      "content": "Carousel Settings"
    },
    {
      "type": "checkbox",
      "id": "navigation",
      "label": "Show navigation",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "infinite",
      "label": "Infinite loop sliding",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Enable autoplay",
      "default": false
    },
    {
      "type": "text",
      "id": "autoplay_speed",
      "label": "Autoplay speed",
      "info": "Autoplay speed in milliseconds. Type: int(ms)",
      "default": "10000"
    },
	{
      "type": "range",
      "id": "columns",
      "min": 1,
      "max": 5,
      "step": 1,
      "label": "Number of Columns >1440px",
      "default": 4,
      "info": "Desktops"
    },
	{
      "type": "range",
      "id": "column1440",
      "min": 1,
      "max": 5,
      "step": 1,
      "label": "Number of Columns 1200px to 1440px",
      "default": 4,
      "info": "Desktops"
    },
    {
      "type": "range",
      "id": "column1",
      "min": 1,
      "max": 5,
      "step": 1,
      "label": "Number of Columns on 992px to 1199px",
      "default": 4,
      "info": "Desktops"
    },
    {
      "type": "range",
      "id": "column2",
      "min": 1,
      "max": 5,
      "step": 1,
      "label": "Number of Columns on 768px to 991px",
      "default": 3,
      "info": "Laptop"
    },
    {
      "type": "range",
      "id": "column3",
      "min": 1,
      "max": 5,
      "step": 1,
      "label": "Number of Columns on 480px to 767px",
      "default": 1,
      "info": "Tablets"
    },
	{
      "type": "range",
      "id": "column4",
      "min": 1,
      "max": 5,
      "step": 1,
      "label": "Number of Columns in 480px or less than",
      "default": 1,
      "info": "Mobile phone"
    }
  ],
  "templates": ["product"],
	"presets": [
		{
			"name": "Product recommendations"
		}
    ]
}
{% endschema %}
